var imgRoute,isMobile,bubbleColor,headerElement,mobileHeaderHeight,cookieBannerHeight,timer,interval,baseColor,isBaseColorGradient;const TrengoWidget={init:function(){this.getWidgetColor();const a=this.setWidgetObservers();this.setWidgetPlaceholderButton(),isMobile&&a.headerObserver.observe(headerElement[0],{attributes:!0}),window.Trengo.on_ready=function(){window.Trengo.Api.Widget.render(),setTimeout(function(){this.onTrengoWidgetReady(a.widgetIframeObserver),window.Trengo.Api.Widget.open("chat")}.bind(this),250)}.bind(this),window.Trengo.on_open=function(){this.onTrengoWidgetOpne()}.bind(this),window.Trengo.on_close=function(){this.onTrengoWidgetClose()}.bind(this)},getWidgetColor:function(){headerElement=$("#header").length?$("#header"):$(".m-header").length?$(".m-header"):$(".sticky-header").length?$(".sticky-header"):$("#travel-home-header").length?$("#travel-home-header"):$(".header-nav").length?$(".header-nav"):$(".header").first(),void 0==headerElement[0]&&(headerElement=$("body > .wrap").length?$("body > .wrap > div").first():$("body > div:not(.wrap)").first()),mobileHeaderHeight=isMobile&&headerElement.hasClass("fix-bottom-mobile")?headerElement.height():0,void 0!=headerElement.css("background-image")&&"none"!=headerElement.css("background-image")?baseColor=headerElement.css("background-image"):void 0!=headerElement.css("background-color")&&"none"!=headerElement.css("background-color")?baseColor=headerElement.css("background-color"):void 0!=$(".block-navbar").css("background-color")&&"none"!=$(".block-navbar").css("background-color")&&(baseColor=$(".block-navbar").css("background-color")),isBaseColorGradient=baseColor.indexOf("gradient")>=0,baseColor=void 0!=baseColor?baseColor:bubbleColor,baseColor=this.isColorTooLight(baseColor)?bubbleColor:baseColor,baseColor=baseColor.indexOf("rgba")>=0?bubbleColor:baseColor;var a=Cookies.get("trengoBaseColor");void 0!=a?a!=bubbleColor&&(baseColor=a):Cookies.set("trengoBaseColor",baseColor)},setWidgetPlaceholderButton:function(){$("body").append('<div id="trengo-assist" style="display:block;opacity:0;height:60px;width:60px;position:fixed;bottom:0px;right:20px;border-radius:36px;z-index:1000;pointer-events:none;transition: all 0.25s ease-out 0s;">'),setTimeout(function(){isBaseColorGradient?$("#trengo-assist").css({"background-image":"url("+imgRoute+"trengo-launcher-icon.webp), "+baseColor}):$("#trengo-assist").css({"background-image":"url("+imgRoute+"trengo-launcher-icon.webp)","background-color":baseColor}),$("#trengo-assist").css({opacity:"1",bottom:mobileHeaderHeight+cookieBannerHeight+20+"px","pointer-events":"all",cursor:"pointer","background-size":"contain","box-shadow":"0 0 15px rgba(0,0,0,.75)"})},500);var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.widget.trengo.eu/embed.js",$("#trengo-assist").on("click",function(){document.getElementsByTagName("head")[0].appendChild(a)}),$(".cookieAccept").on("click",function(){cookieBannerHeight=0,$("#trengo-assist").css({bottom:mobileHeaderHeight+cookieBannerHeight+20+"px"}),window.Trengo.extraOffsetY=mobileHeaderHeight+cookieBannerHeight+"px"})},setWidgetObservers:function(){return{headerObserver:new MutationObserver(function(a){a.forEach(function(a){"attributes"===a.type&&("class"==a.attributeName?(mobileHeaderHeight=$("#header.sticky-header").height(),mobileHeaderHeight=a.target.classList.contains("fix-bottom-mobile")?mobileHeaderHeight:0,window.Trengo.extraOffsetY=mobileHeaderHeight+"px",$("#trengo-assist").css({bottom:mobileHeaderHeight+20+"px"})):"style"==a.attributeName&&("none"==a.target.style.display?(window.Trengo.extraOffsetY="0px",$("#trengo-assist").css({bottom:"20px"})):"none"!=a.target.style.display&&(mobileHeaderHeight=$("#header.sticky-header").height(),mobileHeaderHeight=a.target.classList.contains("fix-bottom-mobile")?mobileHeaderHeight:0,window.Trengo.extraOffsetY=mobileHeaderHeight+"px",$("#trengo-assist").css({bottom:mobileHeaderHeight+20+"px"}))))})}),widgetIframeObserver:new MutationObserver(function(a){a.forEach(function(a){a.addedNodes.length&&a.target.classList.contains("panel-body-content")&&a.addedNodes[0].classList.contains("inbound")&&(this.updateStyling($(".TrengoWidgetPanel__iframe > iframe").contents()),this.resetInterval())}.bind(this))}.bind(this))}},onTrengoWidgetReady:function(a){const b=$(".TrengoWidgetLauncher__iframe"),c=$(".TrengoWidgetPanel__iframe > iframe").contents(),d=$("iframe.trengo-vue-iframe").contents(),e=d.find(".launcher-container");$("#trengo-web-widget .TrengoOnlineStatus__iframe").css("display","none"),b.css({"z-index":"999",transition:"0.25s margin ease-out"});var f=b.attr("style");b.attr("style",f+" box-shadow: 0 0 15px rgba(0,0,0,.75)!important;"),b.find(".launcher-triangle").hide(),e.find(".launcher-stripes").empty(),e.css({"background-image":"url("+imgRoute+"trengo-launcher-icon.webp)","background-size":"contain","border-radius":"36px"}),void 0!=baseColor&&""!=baseColor&&(isBaseColorGradient?e.css({"background-image":"url("+imgRoute+"trengo-launcher-icon.webp), "+baseColor}):e.css({"background-image":"url("+imgRoute+"trengo-launcher-icon.webp)","background-color":baseColor}),c.find("button.panel-channel.active").css({color:baseColor}),c.find("button.button-success").css({background:baseColor}),c.find("#composer").attr("style",f+" box-shadow: rgba(0,0,0/.75)0px 3px 12px!important;"),c.find(".panel-composer-control").css({color:bubbleColor})),this.updateStyling(c),isMobile&&(mobileHeaderHeight=$("#header.sticky-header").height(),mobileHeaderHeight=$("#header.sticky-header").hasClass("fix-bottom-mobile")?mobileHeaderHeight:0),window.Trengo.extraOffsetY=mobileHeaderHeight+cookieBannerHeight+"px",a.observe(c[0],{subtree:!0,childList:!0}),setTimeout(function(){$("#trengo-assist").remove()},500)},onTrengoWidgetOpen:function(){},onTrengoWidgetClose:function(){clearInterval(interval),setTimeout(function(){$("#trengo-web-widget .TrengoOnlineStatus__iframe").css("display","none")},250)},updateStyling:function(a){a.find(".message.inbound .message-inner").css({background:bubbleColor})},checkInputs:function(){const a=$(".TrengoWidgetPanel__iframe > iframe").contents();timer--,a.on("click",function(){this.resetInterval()}.bind(this)),a.on("keydown",function(){this.resetInterval()}.bind(this))},resetInterval:function(){clearInterval(interval),timer=120,interval=setInterval(this.checkInputs(timer),1e3)},isColorTooLight:function(a){for(var b=a.split(","),c=!0,d=0;d<b.length;d++){if(0==(c=parseInt(b[d].replace(/[^0-9]/g,""))>=180))break}return c}};document.addEventListener("DOMContentLoaded",function(){TrengoWidget.init()});